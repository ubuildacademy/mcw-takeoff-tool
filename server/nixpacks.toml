providers = ["node", "python"]

# Railway's python provider will auto-install requirements.txt
# Railway's node provider will auto-install npm packages and run build
# Both providers run automatically when package.json and requirements.txt are detected
# IMPORTANT: Ensure Railway service root directory is set to "server/" in Railway dashboard

# Install system libraries required for OpenCV and PDF processing
# These are installed after Node.js provider sets up npm
# Note: ImageMagick requires Ghostscript for PDF support
[phases.install]
nixPkgs = ["libGL", "glib", "libGLU", "pkg-config", "imagemagick", "ghostscript"]

[variables]
# Don't override PATH here - let Node.js and Python providers set up their own paths
# Python venv will be available at runtime via the python provider
PYTHONUNBUFFERED = "1"

[start]
cmd = "npm start"

