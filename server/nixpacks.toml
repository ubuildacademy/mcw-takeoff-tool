providers = ["node", "python"]

# Railway's python provider will auto-install requirements.txt
# Railway's node provider will auto-install npm packages and run build
# Both providers run automatically when package.json and requirements.txt are detected
# IMPORTANT: Ensure Railway service root directory is set to "server/" in Railway dashboard

# Install system libraries required for OpenCV
# These are installed after Node.js provider sets up npm
[phases.install]
nixPkgs = ["libGL", "glib", "libGLU", "pkg-config"]

[variables]
# Python virtual environment path (set by python provider)
# Node.js provider handles npm PATH automatically - don't override it
PATH = "/opt/venv/bin:$PATH"
PYTHONUNBUFFERED = "1"

[start]
cmd = "npm start"

